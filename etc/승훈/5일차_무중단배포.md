## 무중단 배포란?

- 소프트웨어 또는 웹 애플리케이션을 업데이트하거나 새로운 버전을 배포할 때 중단 없이 서비스를 계속 제공하는 배포 방식

⇒ 기존의 서비스가 동작하면서 새로운 업데이트가 이루어지기 때문에 사용자들은 전환 과정에서 서비스 중단을 경험하지 않게 됨

## 무중단 배포 전략

- **롤링 배포**
- **블루-그린 배포**
- **카나리 배포**

1. **롤링 배포**
- 새로운 버전을 점진적으로 적용하는 방식으로 무중단 배포의 가장 기본적인 방식
- 새로운 버전이 등록 되는 서버에서는 다운타임이 발생 할 수 있으므로 로드 밸런서가 일시적으로 트래픽을 보내지 않다가 배포가 완료된 후 다시 트래픽을 보내는 방식을 통해 새로운 버전을 배포 하는 전략
- **장점**
    - 인스턴스마다 차례로 배포를 진행하기에 상황에 따라 손쉽게 롤백이 가능
    - 추가적인 인스턴스를 늘리지 않아도 됨
    - 간편한 관리
- **단점**
    - 새 버전을 배포할때 인스턴스의 수가 감소하기 때문에 사용중인 인스턴스에 트래픽이 몰릴 수 있음. 즉, 서비스 처리 용량을 고려해야 함
    - 배포가 진행될때 구버전과 신버전이 공존하기에 호환성 문제가 발생할 수 있음

1. **블루-그린 배포**
- 블루는 구버전, 그린은 신버전을 의미함
- 운영중인 구버전과 동일하게 신버전의 인스턴스를 구성한 후 로드밸런서를 통해 모든 트래픽을 한번에 신버전 쪽으로 전환하는 방식
- **장점**
    - 구버전의 인스턴스가 그대로 남아있어서 손쉬운 롤백이 가능함
    - 구버전의 환경을 다음 배포에 재사용할 수 있음
    - 운영환경에 영향을 주지 않고 새 버전 테스트 가능
- **단점**
    - 시스템 자원이 두배로 필요함
    - 새로운 환경에 대한 테스트가 전제되어야 함

1. **카나리 배포**
- 옛날 광부들이 유독 가스에 민감한 카나리아 새를 이용해 가스 누출 위험을 감지했던 것에서 유래한 것으로 잠재적 문제 상황을 미리 발견하기 위한 방식
- 신버전을 소수의 유저들에게만 배포를 해보고 문제가 없는 것을 확인해가며 점차 많은 유저들에게 배포하는 기법
- 블루그린 배포와 유사하지만 블루그린처럼 트래픽을 한번에 확 바꾸는 것이 아니라 단계적으로 전환하기에 부정적 영향을 최소화하고 상황에 따라 트래픽 양을 조절하며 롤백할 수 있음
- **장점**
    - 문제 상황을 빠르게 감지 A/B 테스트로 활용 가능
- **단점**
    - 네트워크 트래픽 제어 부담