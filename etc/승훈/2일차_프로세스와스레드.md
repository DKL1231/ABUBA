### **Q. 프로세스와 스레드의 차이가 무엇인가요?**

- 프로세스는 **운영체제로부터 자원을 할당받는 작업의 단위**이고, 스레드는 **프로세스가 할당받은 자원을 이용하는 실행의 단위**입니다.
- 프로세스는 **메모리 상에서 실행중인 프로그램**을 말하며, 스레드는 **이 프로세스 안에서 실행되는 흐름 단위**를 말합니다.

**프로세스**는 실행될 때 운영체제로부터 프로세서, 필요한 주소 공간, 메모리 등 자원을 할당받음

**스레드**는 한 프로세스 내에서 동작되는 여러 실행의 흐름으로 프로세스 내의 주소 공간이나 자원들을 같은 프로세스 내에 스레드끼리 공유하면서 실행됨

<aside>
💡 ex) 크롬 브라우저가 실행되면 **프로세스** 하나가 생성됨. 그런데 우리는 브라우저에서 파일을 다운받으며 온라인 쇼핑을 하면서 게임을 하기도 함
⇒ 하나의 프로세스 안에서 여러가지 작업들 흐름이 동시에 진행되기 때문에 가능한건데, 이러한 일련의 작업 흐름들을 스레드라고 하며, 여러개가 있다면 이를 **멀티 스레드**라고 함
⇒ 스레드 수가 많을 수록 당연히 프로그램 속도도 동시에 하는 작업이 많아져 성능이 올라감

</aside>

*하나의 프로그램은 하나 이상의 프로세스를 가지고 있고, 하나의 프로세스는 반드시 하나 이상의 스레드를 가짐!!!*

🍀 **요약**

**프로세스 : 자신만의 고유 공간과 자원을 할당받아 사용**

**스레드 : 다른 스레드와 공간과 자원을 공유하면서 사용**

⇒ 운영체제가 시스템의 자원을 어떤 단위로 할당하고, 프로세스와 스레드는 이 자원을 어떻게 사용하는지를 알고 있는지에 대한 질문

**WHY** 멀티 프로세스로 작업할 수 있는 것을 굳~이 하나의 프로세스에서 스레드로 나눠서 할까?

⇒ **시스템 자원을 효율적으로 관리**하기 위해서 스레드를 사용

⇒ 멀티 프로세스로 실행되는 작업을 멀티 스레드로 실행할 경우 프로세스를 생성하여 자원을 할당하는 **시스템 콜이 줄어들어** 자원을 효율적으로 관리할 수 있음. 프로세스 간의 통신보다 스레드 간의 통신 비용이 적으므로 작업들 간의 통신 부담이 줄어듦

⇒ but, 스레드 간의 자원 공유는 전역 변수를 이용하기 때문에 **동기화 문제에 신경을 써야함**

### **Q. 프로세스의 문제점은?**

- 프로세스 생성에 큰 오버헤드가 있음 ( 프로세스를 생성할때 많은 시간이 소요됨)
- 프로세스 컨텍스트 스위칭의 비효율성, 오버헤드가 큼
- 프로세스 사이에 통신이 어렵다는 점 (IPC사용해야함)

### **Q. 스레드의 출현 목적은?**

- 프로세스보다 크기가 **작은 실행 단위 필요**
- 프로세스의 생성 및 소멸에 따른 **오버헤드 감소**
- **빠른 컨텍스트 스위칭**
- 프로세스들의 통신 시간, 방법 어려움 해소

---

### 🍀 프로세스의 자원 구조

프로그램이 실행돼서 프로세스가 만들어지면 **코드 영역, 데이터 영역, 스택 영역, 힙 영역** 이렇게 4가지의 메모리 영역으로 구성돼서 할당받게 됨


- **코드 영역(Code/Text)** : 프로그래머가 작성한 프로그램 함수들의 코드가 CPU가 해석 가능한 기계어 형태로 저장되어 있음
- **데이터 영역(Data)** : 코드가 실행되면서 사용하는 전역 변수나 각종 데이터들이 모여있음. 데이터 영역은 .data, .rodata, .bss 영역으로 세분화 됨
    - .data : 전역 변수 또는 static 변수 등 프로그램이 사용하는 데이터를 저장
    - .BSS : 초기값 없는 전역 변수, static 변수가 저장
    - .rodata : const같은 상수 키워드 선언 된 변수나 문자열 상수가 저장
- **스택 영역(Stack)** : 지역 변수와 같은 호출한 함수가 종료되면 되돌아올 임시적인 자료를 저장하는 독립적인 공간. Stack은 함수의 호출과 함께 할당되며, 함수의 호출이 완료되면 소멸함. 만일 stack 영역을 초과하면 stack overflow 에러가 발생
- **힙 영역(Heap)** : 생성자, 인스턴스와 같은 동적으로 할당되는 데이터들을 위해 존재하는 공간. 사용자에 의해 메모리 공간이 동적으로 할당되고 해제됨

⇒ 코드 영역과 데이터 영역은 선언할 때 크기가 결정되는 **정적 영역**이지만, 스택 영역과 힙 영역은 프로세스가 실행되는 동안 크기가 늘어났다 줄어들기도 하는 **동적 영역**

---

### 🍀 스레드의 자원 공유

스레드는 프로세스가 할당 받은 자원을 이용하는 실행의 단위로서, 스레드가 여러 개 있으면 우리가 파일을 다운 받으며 동시에 웹서핑을 할 수 있게 해줌

⇒ 스레드끼리 프로세스의 자원을 공유하면서 프로세스 실행 흐름의 일부가 되기 때문에 동시 작업 가능!!


- 4가지 메모리 영역(Code, Data, Heap, Stack) 중 스레드는 Stack만 할당받아 복사하고 Code, Data, Heap은 프로세스내의 다른 스레드들과 **공유**
- 반면에 프로세스는 기본적으로 **프로세스끼리 다른 프로세스의 메모리에 직접 접근할 수는 없음**

---

### 🍀 프로세스의 자원 공유

- 기본적으로 각 프로세스는 메모리에 별도의 주소 공간에서 실행되기 때문에, 한 프로세스는 다른 프로세스의 변수나 자료구조에 접근할 수 없다고 했음. 그치만 다음과 같은 방법을 통해 다른 프로세의 정보에 접근 가능함
    - **IPC(Inter-Process Communication) 사용**
    - **LPC(Local inter-Process Communication) 사용**
    - **별도로 공유 메모리를 만들어서 정보를 주고받도록 설정**
    

but, 프로세스 자원 공유는 단순히 CPU 레지스터 교체뿐만이 아니라 RAM과 CPU 사이의 캐시 메모리까지 초기화되기 때문에 자**원 부담이 크다는 단점이 있음**

⇒ 다중 작업이 필요한 경우 스레드를 사용하는 것이 훨씬 효율적!!