JWT(Json Web Token)는 웹 애플리케이션에서 인증 및 권한 부여를 위해 널리 사용되는 토큰 기반 인증 메커니즘이다. JWT는 JSON 형식으로 구조화된 데이터의 집합으로, 클라이언트와 서버 간에 정보를 안전하게 전송하는 데 사용된다.

### JWT의 구성 요소

JWT는 세 개의 부분으로 나누어진다. 각 부분은 점(`.`)으로 구분된다.

1. **헤더(Header)**: JWT의 헤더에는 토큰의 타입과 서명에 사용된 해싱 알고리즘이 포함된다.
   ```json
   {
     "alg": "HS256",
     "typ": "JWT"
   }
   ```

2. **페이로드(Payload)**: 페이로드는 토큰의 실제 데이터를 포함한다. 이 데이터는 일반적으로 클레임(claim)이라고 불리는 정보의 집합이다. 클레임은 인증 관련 정보를 담고 있다.
   ```json
   {
     "sub": "1234567890",
     "name": "Dongkyu Lee",
     "admin": true
   }
   ```
   클레임은 등록된 클레임(표준화된 클레임), 공개 클레임(사용자가 정의한 클레임), 비공개 클레임(발급자와 수신자 간에만 사용되는 클레임)으로 나뉜다.

3. **서명(Signature)**: 서명은 토큰의 무결성을 검증하기 위해 사용된다. 서명은 헤더, 페이로드, 그리고 비밀 키를 조합하여 생성된다. 서명을 통해 토큰이 중간에 변조되지 않았음을 보장할 수 있다.

   서명은 다음과 같은 방식으로 생성된다:
   ```
   HMACSHA256(
     base64UrlEncode(header) + "." +
     base64UrlEncode(payload),
     secret)
   ```

### JWT의 동작 방식

1. **토큰 생성**: 클라이언트가 인증에 성공하면, 서버는 사용자 정보를 포함한 JWT를 생성한다. 이 토큰은 비밀 키로 서명되어 클라이언트에게 전달된다.

2. **토큰 저장**: 클라이언트는 이 JWT를 로컬 스토리지 또는 쿠키에 저장한다.

3. **토큰 사용**: 클라이언트는 서버와 통신할 때 JWT를 HTTP 헤더(일반적으로 `Authorization: Bearer <token>`)에 포함시켜 전송한다.

4. **토큰 검증**: 서버는 전달받은 JWT의 서명을 검증하여 토큰의 무결성과 유효성을 확인한다. 서명이 유효하다면, 서버는 페이로드의 정보를 사용하여 요청을 처리한다.

### JWT의 장점

1. **자기 포함성**: JWT는 필요한 모든 정보를 자체적으로 포함하고 있으므로, 별도의 데이터베이스 조회 없이 토큰만으로도 인증이 가능하다.

2. **확장성**: 분산 시스템에서 유용하게 사용된다. 서버는 상태를 저장할 필요가 없고, 토큰만으로 요청을 처리할 수 있어, 수평적으로 확장하는 데 유리하다.

3. **편리성**: 토큰이 클라이언트에 저장되므로, 매 요청마다 로그인 상태를 확인할 필요 없이 클라이언트에서 토큰을 자동으로 전송할 수 있다.

4. **안전성**: 적절히 구성된 경우, JWT는 보안에 강하다. 서명된 토큰을 사용하면 데이터 변조를 방지할 수 있고, 전송 중에 SSL/TLS를 사용하면 데이터를 안전하게 보호할 수 있다.

### JWT의 단점

1. **토큰 크기**: JWT는 자기 포함성을 가지므로, 토큰이 커질 수 있다. 특히 페이로드에 많은 클레임을 포함하는 경우, 토큰 크기가 커져 네트워크 대역폭에 영향을 줄 수 있다.

2. **만료 관리**: JWT는 클라이언트 측에서 저장되기 때문에, 만료된 토큰을 제때 처리하지 않으면 보안 문제가 발생할 수 있다. 또한, 서버에서 JWT를 강제로 만료시키는 것이 어렵다.

3. **토큰 탈취 위험**: JWT가 탈취되면 그 토큰이 유효한 기간 동안에는 악용될 수 있다. 이를 방지하기 위해서는 SSL/TLS를 사용하고, 토큰을 안전하게 관리해야 한다.

### JWT 사용 사례

1. **사용자 인증**: 가장 일반적인 사용 사례로, 사용자가 로그인할 때 JWT를 발급하고, 이후 요청에 JWT를 포함시켜 사용자를 인증한다.

2. **권한 부여**: JWT를 사용하여 특정 리소스나 기능에 대한 접근 권한을 부여하는 데 사용된다. 페이로드에 포함된 클레임을 기반으로 접근을 제어할 수 있다.

3. **정보 교환**: JWT는 두 당사자 간에 정보를 안전하게 교환하는 방법으로 사용할 수 있다. 서명된 토큰을 사용하여 정보의 무결성을 보장한다.

JWT는 웹 애플리케이션에서 무상태 인증을 구현하는 데 매우 유용한 도구이다. 단, 보안과 성능을 고려한 설계가 중요하다.